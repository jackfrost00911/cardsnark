---
---
<!DOCTYPE html>
<html lang="en">
<head>
    {% include google-analytics.html %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CardSnark Matchmaker 3.0</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif; background: #f3f4f6; color: #1f2937; }
        
        /* Custom Checkbox Styling */
        .snark-radio:checked + div {
            background-color: #111827;
            color: #ffffff;
            border-color: #111827;
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .snark-radio:checked + div .check-icon { display: block; }
        .snark-radio:checked + div .icon-main { color: #818cf8; } /* Light Indigo */
        
        .tool-option:hover > div { border-color: #9ca3af; }
        
        /* Smooth Fade In */
        .fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Inherit font fix */
        #header-container, #footer-container { font-family: initial; }
    </style>
</head>
<body class="bg-gray-100">

    <!-- Header Loader -->
    <div id="header-container"></div>
    <script>
        fetch('/includes/header.html').then(r => r.text()).then(d => document.getElementById('header-container').innerHTML = d);
    </script>

    <!-- MAIN TOOL WRAPPER -->
    <div class="max-w-5xl mx-auto px-4 py-12">
        
        <div class="text-center mb-10">
            <h1 class="text-4xl md:text-5xl font-extrabold text-gray-900 mb-3">The Matchmaker <span class="text-indigo-600">v3.0</span></h1>
            <p class="text-lg text-gray-600 max-w-2xl mx-auto">
                Stop guessing. We analyze 8 data points to find the card that actually fits your spending (and your ego).
            </p>
        </div>

        <div class="bg-white rounded-3xl shadow-xl border border-gray-200 overflow-hidden">
            <!-- Progress Bar Visual -->
            <div class="h-2 bg-gray-100 w-full">
                <div class="h-full bg-indigo-600 w-1/4" id="progress-bar"></div>
            </div>

            <div class="p-6 md:p-12 space-y-12">

                <!-- 1. CREDIT SCORE -->
                <div class="tool-section">
                    <h3 class="text-xl font-bold mb-4 flex items-center">
                        <span class="bg-black text-white w-8 h-8 rounded-full flex items-center justify-center mr-3 text-sm">1</span>
                        Credit Score Reality Check
                    </h3>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <label class="tool-option cursor-pointer">
                            <input type="radio" name="score" value="excellent" class="snark-radio hidden" checked>
                            <div class="border-2 border-gray-200 rounded-xl p-4 text-center h-full flex flex-col justify-center relative transition">
                                <i class="fa-solid fa-check-circle check-icon hidden absolute top-2 right-2 text-green-400 text-sm"></i>
                                <div class="font-bold">Excellent</div>
                                <div class="text-xs text-gray-500 mt-1">750+</div>
                            </div>
                        </label>
                        <label class="tool-option cursor-pointer">
                            <input type="radio" name="score" value="good" class="snark-radio hidden">
                            <div class="border-2 border-gray-200 rounded-xl p-4 text-center h-full flex flex-col justify-center relative transition">
                                <i class="fa-solid fa-check-circle check-icon hidden absolute top-2 right-2 text-green-400 text-sm"></i>
                                <div class="font-bold">Good</div>
                                <div class="text-xs text-gray-500 mt-1">700-749</div>
                            </div>
                        </label>
                        <label class="tool-option cursor-pointer">
                            <input type="radio" name="score" value="fair" class="snark-radio hidden">
                            <div class="border-2 border-gray-200 rounded-xl p-4 text-center h-full flex flex-col justify-center relative transition">
                                <i class="fa-solid fa-check-circle check-icon hidden absolute top-2 right-2 text-green-400 text-sm"></i>
                                <div class="font-bold">Fair</div>
                                <div class="text-xs text-gray-500 mt-1">640-699</div>
                            </div>
                        </label>
                        <label class="tool-option cursor-pointer">
                            <input type="radio" name="score" value="bad" class="snark-radio hidden">
                            <div class="border-2 border-gray-200 rounded-xl p-4 text-center h-full flex flex-col justify-center relative transition">
                                <i class="fa-solid fa-check-circle check-icon hidden absolute top-2 right-2 text-green-400 text-sm"></i>
                                <div class="font-bold">Rebuilding</div>
                                <div class="text-xs text-gray-500 mt-1">&lt; 640</div>
                            </div>
                        </label>
                    </div>
                </div>

                <!-- 2. USAGE & TYPE -->
                <div class="tool-section border-t border-gray-100 pt-8">
                    <h3 class="text-xl font-bold mb-4 flex items-center">
                        <span class="bg-black text-white w-8 h-8 rounded-full flex items-center justify-center mr-3 text-sm">2</span>
                        Card Type & Usage
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <label class="tool-option cursor-pointer">
                            <input type="radio" name="usage" value="personal" class="snark-radio hidden" checked>
                            <div class="border-2 border-gray-200 rounded-xl p-4 flex items-center hover:bg-gray-50 transition">
                                <i class="fa-solid fa-user icon-main text-2xl text-gray-400 mr-4"></i>
                                <div>
                                    <div class="font-bold">Personal Card</div>
                                    <div class="text-xs text-gray-500">For my own bad decisions</div>
                                </div>
                            </div>
                        </label>
                        <label class="tool-option cursor-pointer">
                            <input type="radio" name="usage" value="business" class="snark-radio hidden">
                            <div class="border-2 border-gray-200 rounded-xl p-4 flex items-center hover:bg-gray-50 transition">
                                <i class="fa-solid fa-briefcase icon-main text-2xl text-gray-400 mr-4"></i>
                                <div>
                                    <div class="font-bold">Business Card</div>
                                    <div class="text-xs text-gray-500">LLC / Sole Prop / Side Hustle</div>
                                </div>
                            </div>
                        </label>
                    </div>
                </div>

                <!-- 3. PRIMARY GOAL -->
                <div class="tool-section border-t border-gray-100 pt-8">
                    <h3 class="text-xl font-bold mb-4 flex items-center">
                        <span class="bg-black text-white w-8 h-8 rounded-full flex items-center justify-center mr-3 text-sm">3</span>
                        What is the main mission?
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <label class="tool-option cursor-pointer">
                            <input type="radio" name="goal" value="rewards" class="snark-radio hidden" checked>
                            <div class="border-2 border-gray-200 rounded-xl p-4 text-center transition">
                                <i class="fa-solid fa-trophy icon-main text-xl mb-2 text-gray-400"></i>
                                <div class="font-bold text-sm">Max Rewards</div>
                                <div class="text-xs opacity-70">Travel or Cash</div>
                            </div>
                        </label>
                        <label class="tool-option cursor-pointer">
                            <input type="radio" name="goal" value="bt" class="snark-radio hidden">
                            <div class="border-2 border-gray-200 rounded-xl p-4 text-center transition">
                                <i class="fa-solid fa-life-ring icon-main text-xl mb-2 text-gray-400"></i>
                                <div class="font-bold text-sm">Kill Debt (0% APR)</div>
                                <div class="text-xs opacity-70">Balance Transfer</div>
                            </div>
                        </label>
                        <label class="tool-option cursor-pointer">
                            <input type="radio" name="goal" value="rent" class="snark-radio hidden">
                            <div class="border-2 border-gray-200 rounded-xl p-4 text-center transition">
                                <i class="fa-solid fa-house-user icon-main text-xl mb-2 text-gray-400"></i>
                                <div class="font-bold text-sm">Pay Rent</div>
                                <div class="text-xs opacity-70">Earn on Rent</div>
                            </div>
                        </label>
                    </div>
                </div>

                <!-- 4. SPENDING HABITS -->
                <div class="tool-section border-t border-gray-100 pt-8">
                    <h3 class="text-xl font-bold mb-4 flex items-center">
                        <span class="bg-black text-white w-8 h-8 rounded-full flex items-center justify-center mr-3 text-sm">4</span>
                        Biggest Monthly Expense?
                    </h3>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                        <label class="tool-option cursor-pointer">
                            <input type="radio" name="spend_cat" value="dining" class="snark-radio hidden" checked>
                            <div class="border-2 border-gray-200 rounded-xl p-3 text-center transition">
                                <i class="fa-solid fa-utensils icon-main mb-2 text-gray-400"></i>
                                <div class="font-bold text-sm">Dining</div>
                            </div>
                        </label>
                        <label class="tool-option cursor-pointer">
                            <input type="radio" name="spend_cat" value="travel" class="snark-radio hidden">
                            <div class="border-2 border-gray-200 rounded-xl p-3 text-center transition">
                                <i class="fa-solid fa-plane icon-main mb-2 text-gray-400"></i>
                                <div class="font-bold text-sm">Travel</div>
                            </div>
                        </label>
                        <label class="tool-option cursor-pointer">
                            <input type="radio" name="spend_cat" value="groceries" class="snark-radio hidden">
                            <div class="border-2 border-gray-200 rounded-xl p-3 text-center transition">
                                <i class="fa-solid fa-cart-shopping icon-main mb-2 text-gray-400"></i>
                                <div class="font-bold text-sm">Groceries</div>
                            </div>
                        </label>
                        <label class="tool-option cursor-pointer">
                            <input type="radio" name="spend_cat" value="general" class="snark-radio hidden">
                            <div class="border-2 border-gray-200 rounded-xl p-3 text-center transition">
                                <i class="fa-solid fa-receipt icon-main mb-2 text-gray-400"></i>
                                <div class="font-bold text-sm">Everything</div>
                            </div>
                        </label>
                    </div>
                </div>

                <!-- 5. MONTHLY VOLUME & PERKS -->
                <div class="tool-section border-t border-gray-100 pt-8 grid grid-cols-1 md:grid-cols-2 gap-8">
                    <!-- Volume -->
                    <div>
                        <h3 class="font-bold mb-3 flex items-center">
                            <span class="bg-black text-white w-6 h-6 rounded-full flex items-center justify-center mr-2 text-xs">5</span>
                            Monthly Spend Volume?
                        </h3>
                        <p class="text-xs text-gray-500 mb-2">Can you hit sign-up bonuses?</p>
                        <select id="monthly_spend" class="w-full p-3 border-2 border-gray-200 rounded-xl font-bold bg-white focus:border-black focus:outline-none">
                            <option value="500">Under $1,000 / month</option>
                            <option value="2000">$1,000 - $3,000 / month</option>
                            <option value="4000" selected>$4,000+ / month (High Spender)</option>
                        </select>
                    </div>
                    
                    <!-- Lounge Perk -->
                    <div>
                        <h3 class="font-bold mb-3 flex items-center">
                            <span class="bg-black text-white w-6 h-6 rounded-full flex items-center justify-center mr-2 text-xs">6</span>
                            Airport Lounge Access?
                        </h3>
                        <div class="flex gap-3">
                            <label class="tool-option cursor-pointer w-1/2">
                                <input type="radio" name="lounge" value="yes" class="snark-radio hidden">
                                <div class="border-2 border-gray-200 rounded-xl p-3 text-center">
                                    <div class="font-bold text-sm">Yes, I need it</div>
                                </div>
                            </label>
                            <label class="tool-option cursor-pointer w-1/2">
                                <input type="radio" name="lounge" value="no" class="snark-radio hidden" checked>
                                <div class="border-2 border-gray-200 rounded-xl p-3 text-center">
                                    <div class="font-bold text-sm">Don't care</div>
                                </div>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- 7 & 8. FEES & FOREIGN -->
                <div class="tool-section border-t border-gray-100 pt-8">
                    <h3 class="text-xl font-bold mb-4 flex items-center">
                        <span class="bg-black text-white w-8 h-8 rounded-full flex items-center justify-center mr-3 text-sm">7</span>
                        Annual Fee Tolerance
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <label class="tool-option cursor-pointer">
                            <input type="radio" name="fee" value="0" class="snark-radio hidden" checked>
                            <div class="border-2 border-gray-200 rounded-xl p-4 text-center transition">
                                <div class="font-bold">$0 Only</div>
                                <div class="text-xs text-gray-500">Strictly Free</div>
                            </div>
                        </label>
                        <label class="tool-option cursor-pointer">
                            <input type="radio" name="fee" value="95" class="snark-radio hidden">
                            <div class="border-2 border-gray-200 rounded-xl p-4 text-center transition">
                                <div class="font-bold">Up to $95</div>
                                <div class="text-xs text-gray-500">Standard Fee</div>
                            </div>
                        </label>
                        <label class="tool-option cursor-pointer">
                            <input type="radio" name="fee" value="695" class="snark-radio hidden">
                            <div class="border-2 border-gray-200 rounded-xl p-4 text-center transition">
                                <div class="font-bold">Whatever it takes</div>
                                <div class="text-xs text-gray-500">I want luxury</div>
                            </div>
                        </label>
                    </div>
                </div>

                <!-- SUBMIT -->
                <div class="pt-6">
                    <button onclick="calculateMatch()" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-extrabold text-xl py-5 rounded-2xl shadow-lg transition transform active:scale-95 flex items-center justify-center">
                        <i class="fa-solid fa-wand-magic-sparkles mr-3"></i> Find My Perfect Card
                    </button>
                </div>

            </div>
        </div>

        <!-- RESULTS AREA -->
        <div id="results-area" class="mt-16 hidden scroll-mt-10">
            <div id="loader" class="text-center py-10">
                <i class="fa-solid fa-circle-notch fa-spin text-5xl text-indigo-600 mb-4"></i>
                <h3 class="text-2xl font-bold">Crunching the Numbers...</h3>
                <p class="text-gray-500">Comparing your ego against 12 different banks.</p>
            </div>

            <div id="results-content" class="hidden fade-in">
                <div class="flex justify-between items-end mb-8 border-b border-gray-300 pb-4">
                    <div>
                        <h2 class="text-3xl font-black text-gray-900">The Verdict</h2>
                        <p class="text-gray-600">Based on your score, spending, and tolerance for fees.</p>
                    </div>
                    <button onclick="window.location.reload()" class="text-sm font-bold text-indigo-600 hover:underline">Reset Tool</button>
                </div>

                <div id="card-list" class="space-y-8">
                    <!-- JS Injects Cards Here -->
                </div>
            </div>
        </div>

    </div>

    <!-- Footer Loader -->
    <div id="footer-container"></div>
    <script>
        fetch('/includes/footer.html').then(r => r.text()).then(d => document.getElementById('footer-container').innerHTML = d);
    </script>

    <!-- THE LOGIC ENGINE -->
    <script>
        // --- 1. THE DATABASE ---
        const cardsDB = [
            {
                name: "Chase Sapphire Reserve®",
                type: "personal",
                scores: ["excellent"],
                goal: "rewards",
                categories: ["travel", "dining"],
                annualFee: 550,
                lounge: true,
                minSpend: 4000,
                desc: "The heavy hitter. $300 travel credit effectively drops the fee to $250. Lounge access included.",
                perks: ["10x Hotels/Car Rentals", "Lounge Access", "$300 Travel Credit"],
                link: "/reviews/chase-sapphire-reserve.html",
                color: "bg-indigo-900"
            },
            {
                name: "Chase Sapphire Preferred®",
                type: "personal",
                scores: ["excellent", "good"],
                goal: "rewards",
                categories: ["dining", "travel"],
                annualFee: 95,
                lounge: false,
                minSpend: 4000,
                desc: "The absolute best starter travel card. Great bonus, transfer partners, and fair fee.",
                perks: ["3x Dining", "2x Travel", "60k Bonus Points"],
                link: "/reviews/chase-sapphire-preferred.html",
                color: "bg-blue-700"
            },
            {
                name: "Capital One Venture X",
                type: "personal",
                scores: ["excellent"],
                goal: "rewards",
                categories: ["travel", "general"],
                annualFee: 395,
                lounge: true,
                minSpend: 4000,
                desc: "Pays for itself. You get 10k miles annually + $300 travel credit. Basically free money.",
                perks: ["Unlimited 2x Miles", "Lounge Access", "Cell Phone Protection"],
                link: "/reviews/venture-x.html",
                color: "bg-gray-800"
            },
            {
                name: "American Express® Gold Card",
                type: "personal",
                scores: ["excellent", "good"],
                goal: "rewards",
                categories: ["dining", "groceries"],
                annualFee: 325,
                lounge: false,
                minSpend: 4000,
                desc: "The foodie card. If you eat out or buy groceries, this is mathematically unbeatable.",
                perks: ["4x Dining & Groceries", "$120 Uber Cash", "$100 Resy Credit"],
                link: "/reviews/amex-gold.html",
                color: "bg-yellow-500"
            },
            {
                name: "Citi® Double Cash",
                type: "personal",
                scores: ["excellent", "good", "fair"],
                goal: "rewards",
                categories: ["general"],
                annualFee: 0,
                lounge: false,
                minSpend: 0,
                desc: "Boring but effective. 2% back on everything. Good for balance transfers too.",
                perks: ["2% Flat Rate", "No Annual Fee", "18-Month BT Offer"],
                link: "/reviews/citi-double-cash.html",
                color: "bg-green-600"
            },
            {
                name: "Blue Cash Preferred® (Amex)",
                type: "personal",
                scores: ["excellent", "good"],
                goal: "rewards",
                categories: ["groceries", "gas"],
                annualFee: 95,
                lounge: false,
                minSpend: 3000,
                desc: "The suburban family MVP. 6% back at supermarkets is insane.",
                perks: ["6% Supermarkets", "3% Gas/Transit", "Disney Bundle Credit"],
                link: "/reviews/blue-cash-preferred.html",
                color: "bg-blue-500"
            },
            {
                name: "Capital One SavorOne",
                type: "personal",
                scores: ["good", "excellent"],
                goal: "rewards",
                categories: ["dining", "groceries"],
                annualFee: 0,
                lounge: false,
                minSpend: 500,
                desc: "3% back on dining, entertainment, and grocery stores. $0 annual fee. Underrated.",
                perks: ["3% Dining/Groceries", "10% on Uber (thru Nov 2024)", "No Foreign Fees"],
                link: "/reviews/savor-one.html",
                color: "bg-orange-600"
            },
            {
                name: "Ink Business Preferred®",
                type: "business",
                scores: ["excellent", "good"],
                goal: "rewards",
                categories: ["travel", "general"],
                annualFee: 95,
                lounge: false,
                minSpend: 8000,
                desc: "The king of business bonuses. Huge points if you can hit the spend requirement.",
                perks: ["3x on Ads/Travel", "100k Point Bonus", "Cell Phone Protection"],
                link: "/reviews/ink-preferred.html",
                color: "bg-indigo-800"
            },
            {
                name: "Ink Business Unlimited®",
                type: "business",
                scores: ["excellent", "good"],
                goal: "rewards",
                categories: ["general"],
                annualFee: 0,
                lounge: false,
                minSpend: 6000,
                desc: "Simple business cash back. 1.5% on everything. No thinking required.",
                perks: ["1.5% Flat Rate", "No Annual Fee", "0% Intro APR"],
                link: "/reviews/ink-unlimited.html",
                color: "bg-gray-500"
            },
            {
                name: "Capital One Platinum Secured",
                type: "personal",
                scores: ["bad", "fair"],
                goal: "rewards", // Generic match for bad credit
                categories: ["general"],
                annualFee: 0,
                lounge: false,
                minSpend: 0,
                desc: "The 'I messed up' card. No annual fee, refundable deposit. Use this to rebuild.",
                perks: ["No Annual Fee", "Reports to 3 Bureaus", "Auto-Credit Line Review"],
                link: "/reviews/platinum-secured.html",
                color: "bg-gray-400"
            },
            {
                name: "Citi Simplicity®",
                type: "personal",
                scores: ["good", "fair"],
                goal: "bt", // Balance Transfer specific
                categories: ["general"],
                annualFee: 0,
                lounge: false,
                minSpend: 0,
                desc: "Stop the bleeding. Longest 0% APR period on balance transfers available.",
                perks: ["21 Months 0% APR", "No Late Fees", "No Penalty APR"],
                link: "/reviews/citi-simplicity.html",
                color: "bg-cyan-600"
            },
            {
                name: "Bilt Mastercard®",
                type: "personal",
                scores: ["good", "excellent"],
                goal: "rent", // Rent specific
                categories: ["dining", "travel"],
                annualFee: 0,
                lounge: false,
                minSpend: 0,
                desc: "The only card that earns points on Rent without fees. Game changer for renters.",
                perks: ["1x on Rent", "3x Dining", "Transfer to AA/Hyatt"],
                link: "/reviews/bilt.html",
                color: "bg-black"
            }
        ];

        // --- 2. THE CALCULATION ENGINE ---
        function calculateMatch() {
            // Get User Inputs
            const score = document.querySelector('input[name="score"]:checked').value;
            const usage = document.querySelector('input[name="usage"]:checked').value;
            const goal = document.querySelector('input[name="goal"]:checked').value;
            const spendCat = document.querySelector('input[name="spend_cat"]:checked').value;
            const monthlySpend = parseInt(document.getElementById('monthly_spend').value);
            const needLounge = document.querySelector('input[name="lounge"]:checked').value === 'yes';
            const feeTolerance = parseInt(document.querySelector('input[name="fee"]:checked').value);

            // UI Loader
            const loader = document.getElementById('loader');
            const content = document.getElementById('results-content');
            const resultsArea = document.getElementById('results-area');
            
            resultsArea.classList.remove('hidden');
            loader.classList.remove('hidden');
            content.classList.add('hidden');
            resultsArea.scrollIntoView({ behavior: 'smooth' });

            setTimeout(() => {
                // Score Each Card
                const scoredCards = cardsDB.map(card => {
                    let points = 0;
                    let reasons = [];

                    // A. Credit Score Filter (Hard Gate)
                    if (score === 'bad' && !card.scores.includes('bad')) points = -1000;
                    else if (score === 'fair' && card.scores.includes('excellent') && !card.scores.includes('fair')) points = -500;
                    else if (card.scores.includes(score)) points += 20;

                    // B. Usage Filter (Hard Gate)
                    if (card.type !== usage) points = -1000;

                    // C. Goal Matching
                    if (goal === 'bt' && card.goal === 'bt') { points += 50; reasons.push("Top Balance Transfer Pick"); }
                    if (goal === 'rent' && card.name.includes("Bilt")) { points += 100; reasons.push("Only Card for Rent"); }
                    
                    // D. Category Match
                    if (card.categories.includes(spendCat)) { points += 30; reasons.push(`Great for ${spendCat}`); }
                    else if (card.categories.includes("general")) { points += 10; }

                    // E. Annual Fee
                    if (card.annualFee > feeTolerance) points -= 50; // Too expensive for user
                    else if (card.annualFee === 0 && feeTolerance === 0) points += 10;

                    // F. Lounge Access
                    if (needLounge) {
                        if (card.lounge) { points += 40; reasons.push("Includes Lounge Access"); }
                        else if (card.annualFee > 95) points -= 20; // High fee but no lounge? penalty if user wants lounge
                    }

                    // G. Monthly Spend (Sign up bonus feasibility)
                    // If card requires $4k spend but user only spends $500, penalize
                    if (card.minSpend > (monthlySpend * 3)) { // assuming 3 month window
                        points -= 30; 
                    }

                    return { ...card, points, matchReasons: reasons };
                });

                // Sort and Filter
                const sorted = scoredCards.sort((a, b) => b.points - a.points);
                const topPicks = sorted.filter(c => c.points > -100).slice(0, 3);

                // Render
                const list = document.getElementById('card-list');
                list.innerHTML = '';

                if(topPicks.length === 0) {
                    list.innerHTML = `<div class="p-6 bg-red-50 text-red-700 rounded-xl text-center">No exact matches found. Try relaxing your fee or score filters.</div>`;
                } else {
                    topPicks.forEach((card, idx) => {
                        // Dynamic "Why we picked this" badges
                        const badges = card.matchReasons.map(r => `<span class="bg-indigo-100 text-indigo-800 text-xs font-bold px-2 py-1 rounded-md mr-2">${r}</span>`).join('');
                        
                        // Winner Header
                        let header = "";
                        if (idx === 0) header = `<div class="bg-indigo-600 text-white text-xs font-bold uppercase py-1 px-3 absolute top-0 left-0 rounded-br-xl rounded-tl-xl">#1 Recommendation</div>`;

                        list.innerHTML += `
                            <div class="bg-white border-2 ${idx === 0 ? 'border-indigo-600 shadow-xl scale-[1.02]' : 'border-gray-100'} rounded-2xl p-6 relative flex flex-col md:flex-row gap-6 transition hover:shadow-lg">
                                ${header}
                                <div class="w-full md:w-56 flex-shrink-0 flex flex-col">
                                    <div class="h-32 w-full ${card.color} rounded-xl shadow-inner relative mb-3 overflow-hidden">
                                        <div class="absolute bottom-3 left-3 text-white opacity-80 font-mono text-sm">**** ${card.name.split(' ')[0]}</div>
                                        <div class="absolute top-3 right-3 text-white opacity-90"><i class="fa-solid fa-wifi rotate-90"></i></div>
                                    </div>
                                    <div class="text-center">
                                        <span class="text-2xl font-black text-gray-900">${Math.min(99, 85 + (2-idx)*5)}%</span> <span class="text-xs text-gray-500 font-bold uppercase">Match</span>
                                    </div>
                                </div>

                                <div class="flex-grow">
                                    <div class="mb-2 mt-1">${badges}</div>
                                    <h3 class="text-2xl font-bold text-gray-900 mb-2">${card.name}</h3>
                                    <p class="text-gray-600 text-sm mb-4 italic">"${card.desc}"</p>
                                    
                                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-2 mb-4">
                                        ${card.perks.map(p => `<div class="text-sm font-medium text-gray-700 flex items-center"><i class="fa-solid fa-check text-green-500 mr-2"></i> ${p}</div>`).join('')}
                                    </div>
                                    
                                    <div class="text-xs text-gray-500 flex items-center gap-4">
                                        <span><i class="fa-solid fa-tag"></i> Fee: $${card.annualFee}</span>
                                        ${card.minSpend > 0 ? `<span><i class="fa-solid fa-money-bill"></i> Bonus Spend: $${card.minSpend}</span>` : ''}
                                    </div>
                                </div>

                                <div class="flex flex-col justify-center gap-3 w-full md:w-40">
                                    <a href="${card.link}" class="bg-black hover:bg-gray-800 text-white font-bold py-3 px-4 rounded-xl text-center text-sm transition shadow-lg">
                                        Apply Now
                                    </a>
                                    <a href="${card.link}" class="text-center text-xs text-indigo-600 font-bold hover:underline">Read Review</a>
                                </div>
                            </div>
                        `;
                    });
                }

                loader.classList.add('hidden');
                content.classList.remove('hidden');

            }, 1000);
        }
    </script>
</body>
</html>
